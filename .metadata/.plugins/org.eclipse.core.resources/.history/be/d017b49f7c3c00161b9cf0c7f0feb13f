package source;

import java.util.HashMap;
import java.util.Map;

public class MACC {
	
	// Doubles to get more precision
	double total_ContactLetters;
	double letter_ContactLetters;
	String letter;
	double finalPercentage;
	
	public MACC()
	{
		total_ContactLetters = 0;
		letter_ContactLetters = 0;
		letter = "";
	}
	
	public MACC(String aLetter)
	{
		letter = aLetter;
		total_ContactLetters = 0;
		letter_ContactLetters = 0;
	}
	
	public void calculateMACC(String cipherText)
	{
		String alphabet = "abcdefghijklmnopqrstuvwxyz ";
		Map<String, ContactLetters> listOfContacts = new HashMap<String, ContactLetters>();
		
		for(int i = 0; i < alphabet.length(); ++i)
		{
			String key = Character.toString(alphabet.charAt(i));
			
			listOfContacts.put(key, new ContactLetters(key));
		}
		
		int depth = 0;

		System.out.println("Started Reading");
		
		for(int i = 0; i < cipherText.length(); ++i)
		{
			String previousLetter = "";
			String followingLetter = "";
			
			for(String letter : cipherText.split(""))
			{
				letter = letter.toLowerCase();
				ContactLetters contactLetter = listOfContacts.get(letter);
				
				if(depth > 0)
				{
					previousLetter = Character.toString(cipherText.charAt(depth - 1));
					contactLetter.addToBefore(previousLetter);
					if(!contactLetter.before_counter.containsKey(followingLetter))
					{
						contactLetter.increaseUniqueCount();
					}
				}
				
				if(depth < cipherText.length() - 1)
				{
					followingLetter = Character.toString(cipherText.charAt(depth + 1));
					contactLetter.addToAfter(followingLetter);
					if(!contactLetter.after_counter.containsKey(followingLetter))
					{
						contactLetter.increaseUniqueCount();
					}
				}
				
				++listOfContacts.get(letter).totalLetters;
				++depth;
			}
		}
		
		for(int i = 0; i < alphabet.length(); ++i)
		{
			String letter = Character.toString(alphabet.charAt(i));
			System.out.println(listOfContacts.get(letter).uniqueCount);
		}
	}
	
}
